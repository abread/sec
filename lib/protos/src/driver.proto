syntax = "proto3";
package driver;

message Empty {}

message Position {
    uint64 x = 1;
    uint64 y = 2;
}

message Neighbour {
    Position pos = 1;
    string uri = 2;
}

message EpochUpdateRequest {
    uint64 new_epoch = 1;
    Position new_position = 2;
    repeated string visible_neighbour_uris = 3;
}

// A Malicious Client not only receives the full graph (ie: all neighbours)
// But does not receive a position: they can choose!
//
message MaliciousEpochUpdateRequest {
    uint64 new_epoch = 1;
    repeated Neighbour correct_neighbours = 2;
    repeated string malicious_neighbour_uris = 3;
}

service Driver {
    rpc updateEpoch(EpochUpdateRequest) returns (Empty);
}

service MaliciousDriver {
    rpc updateEpoch(MaliciousEpochUpdateRequest) returns (Empty);
}
